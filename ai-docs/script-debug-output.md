# Script debug output (APS tab)

- Display point: `plugins/aps/src/main/kotlin/app/aaps/plugins/aps/OpenAPSFragment.kt` sets `binding.scriptdebugdata.text = lastAPSResult.scriptDebug?.joinToString("\n")` (layout id `scriptdebugdata` in `plugins/aps/src/main/res/layout/openaps_fragment.xml`). The fragment is used for whichever APS plugin is active, so SMB/AMA/AutoISF all surface here.
- Data plumbing: `DetermineBasalResult` (`core/objects/src/main/kotlin/app/aaps/core/objects/aps/DetermineBasalResult.kt`) copies `scriptDebug` from the algorithmâ€™s `RT.consoleError` list when wrapping the raw `RT` return object.
- Where the list is built (SMB example): `DetermineBasalSMB.determine_basal()` (`plugins/aps/src/main/kotlin/app/aaps/plugins/aps/openAPSSMB/DetermineBasalSMB.kt`) creates an `RT` with `consoleLog`/`consoleError` lists, then populates `consoleError` via `reason()` and direct `consoleError.add(...)` calls (e.g., SMB enablement decisions, target adjustments, prediction guards). `OpenAPSSMBPlugin.invoke()` wires inputs, calls `determine_basal()`, and raises `EventOpenAPSUpdateGui` so the fragment refreshes.
- Other algorithms: `DetermineBasalAutoISF` and `DetermineBasalAMA` follow the same pattern (per-file `consoleError`/`consoleLog` lists attached to their `RT`), so any appended messages show up in the same script debug area.
- Practical note: only `consoleError` is rendered in the UI today; `consoleLog` remains unused. To expose new debug details, add `consoleError.add("...")` entries inside the respective `determine_basal()` flow before the `RT` is returned.
